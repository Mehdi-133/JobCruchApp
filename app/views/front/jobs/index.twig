{% extends "Layouts/layout.twig" %}
{% block content %}
<div class="jobs-container">
    <!-- Header Section -->
    <header class="jobs-header">
        <div class="header-content">
            <div class="welcome-section">
                <h1>Welcome back, {{ user.name }}! ðŸ‘‹</h1>
                <p>Discover your next career opportunity</p>
            </div>
            <div class="user-profile">
                {% if user.profile_image %}
                    <img src="/{{ user.profile_image }}" alt="Profile">
                {% else %}
                    <div class="profile-placeholder">{{ user.name|slice(0,1)|upper }}</div>
                {% endif %}
            </div>
        </div>
    </header>

    <!-- Alert Messages -->
    {% if hasAccepted %}
        <div class="alert alert-info">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
            </svg>
            <span>You have been accepted to a position. You cannot apply to other jobs.</span>
        </div>
    {% endif %}

    <!-- Filter Section -->
    <section class="filter-section">
        <div class="filter-header">
            <h2>Filter Job Offers</h2>
            <button class="btn-reset-filters" onclick="resetFilters()">Reset Filters</button>
        </div>
        
        <div class="filters-container">
            <!-- Search Filter -->
            <div class="filter-group">
                <label for="searchFilter">Search by Title or Company</label>
                <input 
                    type="text" 
                    id="searchFilter" 
                    class="filter-input" 
                    placeholder="Search jobs..."
                    oninput="applyFilters()"
                >
            </div>

            <!-- Location Filter -->
            <div class="filter-group">
                <label for="locationFilter">Location</label>
                <select id="locationFilter" class="filter-select" onchange="applyFilters()">
                    <option value="">All Locations</option>
                    {% set locations = [] %}
                    {% for job in jobs %}
                        {% if job.location not in locations %}
                            {% set locations = locations|merge([job.location]) %}
                            <option value="{{ job.location }}">{{ job.location }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>

            <!-- Contract Type Filter -->
            <div class="filter-group">
                <label for="contractFilter">Contract Type</label>
                <select id="contractFilter" class="filter-select" onchange="applyFilters()">
                    <option value="">All Types</option>
                    {% set contracts = [] %}
                    {% for job in jobs %}
                        {% if job.contract not in contracts %}
                            {% set contracts = contracts|merge([job.contract]) %}
                            <option value="{{ job.contract }}">{{ job.contract }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>

            <!-- Status Filter -->
            <div class="filter-group">
                <label for="statusFilter">Status</label>
                <select id="statusFilter" class="filter-select" onchange="applyFilters()">
                    <option value="">All Statuses</option>
                    <option value="open">Open</option>
                    <option value="applied">Applied</option>
                    <option value="closed">Closed</option>
                </select>
            </div>
        </div>
    </section>

    <!-- Results Summary -->
    <div class="filter-results">
        <p><span id="resultsCount">{{ jobs|length }}</span> job(s) found</p>
    </div>

    <!-- Jobs Grid -->
    <div class="jobs-grid">
        {% for job in jobs %}
            <div class="job-card {% if job.id == acceptedJobId %}applied{% elseif job.id in appliedJobIds %}applied-other{% elseif not job.is_active %}inactive{% endif %}">
                <!-- Company Badge -->
                <div class="company-badge">
                    <div class="company-icon">
                        {{ job.company_name|slice(0,1)|upper }}
                    </div>
                    <div class="company-info">
                        <h3>{{ job.company_name }}</h3>
                        <span class="location">
                            <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                            </svg>
                            {{ job.location }}
                        </span>
                    </div>
                </div>

                <!-- Job Title -->
                <h2 class="job-title">{{ job.title }}</h2>

                <!-- Job Meta -->
                <div class="job-meta">
                    <span class="contract-badge contract-{{ job.contract|lower }}">
                        {{ job.contract }}
                    </span>
                    <span class="posted-date">
                        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                        </svg>
                        {{ job.posted_at|date('M d, Y') }}
                    </span>
                </div>

                <!-- Description -->
                <p class="job-description">{{ job.description|slice(0, 150) }}...</p>

                <!-- Skills -->
                {% if job.skills_required %}
                <div class="skills-tags">
                    {% for skill in job.skills_required|split(',') %}
                        <span class="skill-tag">{{ skill|trim }}</span>
                    {% endfor %}
                </div>
                {% endif %}

                <!-- Action Button -->
                <div class="card-actions">
                    {% if job.id == acceptedJobId %}
                        <button class="btn-applied" disabled>
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            Accepted
                        </button>
                    {% elseif job.id in appliedJobIds %}
                        <button class="btn-applied" disabled>
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            Already Applied
                        </button>
                    {% elseif hasAccepted %}
                        <button class="btn-disabled" disabled>Apply Now</button>
                    {% elseif not job.is_active %}
                        <button class="btn-disabled" disabled>Closed</button>
                    {% else %}
                        <button class="btn-apply" onclick="openApplyModal({{ job.id }}, '{{ job.title }}', '{{ job.company_name }}')">
                            Apply Now
                        </button>
                    {% endif %}
                </div>
            </div>
        {% else %}
            <div class="no-jobs">
                <svg width="64" height="64" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd"/>
                    <path d="M2 13.692V16a2 2 0 002 2h12a2 2 0 002-2v-2.308A24.974 24.974 0 0110 15c-2.796 0-5.487-.46-8-1.308z"/>
                </svg>
                <h3>No Jobs Available</h3>
                <p>Check back soon for new opportunities</p>
            </div>
        {% endfor %}
    </div>
</div>

<!-- Application Modal -->
<div id="applyModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Apply for Position</h2>
            <button class="close-btn" onclick="closeApplyModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="job-info-card">
                <h3 id="modalJobTitle"></h3>
                <p id="modalCompanyName"></p>
            </div>
            
            <form action="/jobs/apply" method="POST" enctype="multipart/form-data" id="applyForm">
                <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                <input type="hidden" name="job_id" id="jobId">
                
                <div class="form-group">
                    <label for="cv">Upload Your CV (Required) *</label>
                    <div class="file-upload-wrapper">
                        <input type="file" id="cv" name="cv" accept=".pdf" required onchange="updateFileName(this)">
                        <label for="cv" class="file-upload-label">
                            <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                            </svg>
                            <span id="fileName">Choose PDF file (Max 5MB)</span>
                        </label>
                    </div>
                    <small>Only PDF format accepted</small>
                </div>

                <div class="form-group">
                    <label for="cover_letter">Cover Letter (Optional)</label>
                    <textarea id="cover_letter" name="cover_letter" rows="6" placeholder="Tell us why you're a great fit for this position..."></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeApplyModal()">Cancel</button>
                    <button type="submit" class="btn-submit">Submit Application</button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

.jobs-container {
    min-height: calc(100vh - 64px);
    background: #f9fafb;
    padding: 2rem;
}

.jobs-header {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.welcome-section h1 {
    font-size: 2rem;
    color: #2d3748;
    margin-bottom: 0.5rem;
}

.welcome-section p {
    color: #718096;
    font-size: 1.1rem;
}

.user-profile img,
.profile-placeholder {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
}

.profile-placeholder {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: bold;
}

.alert {
    background: #ebf8ff;
    border: 1px solid #90cdf4;
    color: #2c5282;
    padding: 1rem 1.5rem;
    border-radius: 12px;
    margin-bottom: 2rem;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.alert svg {
    flex-shrink: 0;
}

.jobs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 2rem;
}

.job-card {
    background: white;
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.07);
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
}

.job-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #667eea, #764ba2);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.job-card:hover::before {
    transform: scaleX(1);
}

.job-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 24px rgba(102, 126, 234, 0.2);
}

.job-card.applied {
    border: 2px solid #48bb78;
    background: #f0fff4;
}

.job-card.applied-other {
    border: 2px solid #4299e1;
    background: #ebf8ff;
}

.job-card.inactive {
    opacity: 0.6;
}

.company-badge {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.company-icon {
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 1.2rem;
    flex-shrink: 0;
}

.company-info h3 {
    font-size: 1rem;
    color: #2d3748;
    margin-bottom: 0.25rem;
}

.location {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    color: #718096;
    font-size: 0.875rem;
}

.job-title {
    font-size: 1.5rem;
    color: #2d3748;
    margin-bottom: 1rem;
    line-height: 1.3;
}

.job-meta {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
}

.contract-badge {
    padding: 0.375rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

.contract-cdi {
    background: #c6f6d5;
    color: #22543d;
}

.contract-cdd {
    background: #fed7d7;
    color: #742a2a;
}

.contract-internship {
    background: #feebc8;
    color: #7c2d12;
}

.contract-freelance {
    background: #e9d8fd;
    color: #44337a;
}

.posted-date {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    color: #718096;
    font-size: 0.875rem;
}

.job-description {
    color: #4a5568;
    line-height: 1.6;
    margin-bottom: 1rem;
    flex-grow: 1;
}

.skills-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
}

.skill-tag {
    background: #edf2f7;
    color: #2d3748;
    padding: 0.375rem 0.75rem;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 500;
}

.card-actions {
    margin-top: auto;
}

.btn-apply,
.btn-applied,
.btn-disabled {
    width: 100%;
    padding: 0.875rem;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.btn-apply {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.btn-apply:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.btn-applied {
    background: #48bb78;
    color: white;
    cursor: not-allowed;
}

.btn-disabled {
    background: #e2e8f0;
    color: #a0aec0;
    cursor: not-allowed;
}

.no-jobs {
    grid-column: 1 / -1;
    text-align: center;
    padding: 4rem 2rem;
    background: white;
    border-radius: 16px;
}

.no-jobs svg {
    color: #cbd5e0;
    margin-bottom: 1rem;
}

.no-jobs h3 {
    font-size: 1.5rem;
    color: #2d3748;
    margin-bottom: 0.5rem;
}

.no-jobs p {
    color: #718096;
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
}

.modal-content {
    background: white;
    margin: 5% auto;
    max-width: 600px;
    border-radius: 20px;
    overflow: hidden;
    animation: slideDown 0.3s ease;
}

@keyframes slideDown {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 1.5rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h2 {
    font-size: 1.5rem;
}

.close-btn {
    background: none;
    border: none;
    color: white;
    font-size: 2rem;
    cursor: pointer;
    line-height: 1;
    transition: transform 0.2s;
}

.close-btn:hover {
    transform: scale(1.2);
}

.modal-body {
    padding: 2rem;
}

.job-info-card {
    background: #f7fafc;
    padding: 1rem 1.5rem;
    border-radius: 12px;
    margin-bottom: 2rem;
}

.job-info-card h3 {
    color: #2d3748;
    margin-bottom: 0.25rem;
}

.job-info-card p {
    color: #718096;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    color: #2d3748;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.form-group small {
    display: block;
    color: #718096;
    font-size: 0.875rem;
    margin-top: 0.5rem;
}

.file-upload-wrapper {
    position: relative;
}

.file-upload-wrapper input[type="file"] {
    position: absolute;
    opacity: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
}

.file-upload-label {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.5rem;
    background: #f7fafc;
    border: 2px dashed #cbd5e0;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.file-upload-label:hover {
    border-color: #667eea;
    background: #edf2f7;
}

.file-upload-label svg {
    color: #667eea;
}

textarea {
    width: 100%;
    padding: 1rem;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    font-family: inherit;
    font-size: 1rem;
    resize: vertical;
}

textarea:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.modal-actions {
    display: flex;
    gap: 1rem;
    margin-top: 2rem;
}

.btn-cancel,
.btn-submit {
    flex: 1;
    padding: 0.875rem;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-cancel {
    background: #e2e8f0;
    color: #2d3748;
}

.btn-cancel:hover {
    background: #cbd5e0;
}

.btn-submit {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.btn-submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

@media (max-width: 768px) {
    .jobs-grid {
        grid-template-columns: 1fr;
    }
    
    .header-content {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
    }
    
    .modal-content {
        margin: 10% 1rem;
    }

    .filters-container {
        grid-template-columns: 1fr;
    }
}

/* Filter Styles */
.filter-section {
    background: white;
    padding: 1.5rem;
    border-radius: 16px;
    margin-bottom: 2rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.filter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.filter-header h2 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #1a202c;
    margin: 0;
}

.btn-reset-filters {
    padding: 0.5rem 1rem;
    background: #edf2f7;
    color: #667eea;
    border: 1px solid #cbd5e0;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-reset-filters:hover {
    background: #e2e8f0;
    border-color: #667eea;
}

.filters-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.filter-group label {
    font-weight: 500;
    color: #4a5568;
    font-size: 0.875rem;
}

.filter-input,
.filter-select {
    padding: 0.75rem;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    font-size: 1rem;
    font-family: inherit;
    transition: all 0.3s ease;
}

.filter-input:focus,
.filter-select:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.filter-input::placeholder {
    color: #a0aec0;
}

.filter-results {
    margin-bottom: 1.5rem;
    padding: 1rem;
    background: #f7fafc;
    border-left: 4px solid #667eea;
    border-radius: 8px;
}

.filter-results p {
    margin: 0;
    color: #4a5568;
    font-weight: 500;
}

#resultsCount {
    color: #667eea;
    font-weight: 600;
}

</style>

<script>
function openApplyModal(jobId, jobTitle, companyName) {
    document.getElementById('applyModal').style.display = 'block';
    document.getElementById('jobId').value = jobId;
    document.getElementById('modalJobTitle').textContent = jobTitle;
    document.getElementById('modalCompanyName').textContent = companyName;
}

function closeApplyModal() {
    document.getElementById('applyModal').style.display = 'none';
    document.getElementById('applyForm').reset();
    document.getElementById('fileName').textContent = 'Choose PDF file (Max 5MB)';
}

function updateFileName(input) {
    const fileName = input.files[0]?.name || 'Choose PDF file (Max 5MB)';
    document.getElementById('fileName').textContent = fileName;
}

// Close modal when clicking outside
window.onclick = function(event) {
    const modal = document.getElementById('applyModal');
    if (event.target == modal) {
        closeApplyModal();
    }
}

// Filter Functions
function applyFilters() {
    const searchTerm = document.getElementById('searchFilter').value.toLowerCase();
    const locationFilter = document.getElementById('locationFilter').value.toLowerCase();
    const contractFilter = document.getElementById('contractFilter').value.toLowerCase();
    const statusFilter = document.getElementById('statusFilter').value.toLowerCase();
    
    const jobCards = document.querySelectorAll('.job-card');
    let visibleCount = 0;
    
    jobCards.forEach(card => {
        const jobTitle = card.querySelector('.job-title').textContent.toLowerCase();
        const companyName = card.querySelector('.company-info h3').textContent.toLowerCase();
        const location = card.querySelector('.location').textContent.toLowerCase();
        const contract = card.querySelector('.contract-badge').textContent.toLowerCase();
        const isApplied = card.classList.contains('applied-other');
        const isAccepted = card.classList.contains('applied');
        const isClosed = card.classList.contains('inactive');
        
        let matchesSearch = jobTitle.includes(searchTerm) || companyName.includes(searchTerm);
        let matchesLocation = !locationFilter || location.includes(locationFilter);
        let matchesContract = !contractFilter || contract.includes(contractFilter);
        let matchesStatus = true;
        
        if (statusFilter === 'applied') {
            matchesStatus = isApplied;
        } else if (statusFilter === 'closed') {
            matchesStatus = isClosed;
        } else if (statusFilter === 'open') {
            matchesStatus = !isApplied && !isAccepted && !isClosed;
        }
        
        const shouldShow = matchesSearch && matchesLocation && matchesContract && matchesStatus;
        
        if (shouldShow) {
            card.style.display = '';
            visibleCount++;
        } else {
            card.style.display = 'none';
        }
    });
    
    // Update results count
    document.getElementById('resultsCount').textContent = visibleCount;
    
    // Show no results message if needed
    const jobsGrid = document.querySelector('.jobs-grid');
    if (visibleCount === 0) {
        if (!document.getElementById('noResults')) {
            const noResults = document.createElement('div');
            noResults.id = 'noResults';
            noResults.style.cssText = 'grid-column: 1/-1; text-align: center; padding: 3rem 1rem; color: #718096;';
            noResults.innerHTML = '<p style="font-size: 1.125rem; font-weight: 500;">No jobs match your filters. Try adjusting your search.</p>';
            jobsGrid.appendChild(noResults);
        }
    } else {
        const noResults = document.getElementById('noResults');
        if (noResults) noResults.remove();
    }
}

function resetFilters() {
    document.getElementById('searchFilter').value = '';
    document.getElementById('locationFilter').value = '';
    document.getElementById('contractFilter').value = '';
    document.getElementById('statusFilter').value = '';
    
    const jobCards = document.querySelectorAll('.job-card');
    jobCards.forEach(card => card.style.display = '');
    
    document.getElementById('resultsCount').textContent = jobCards.length;
    
    const noResults = document.getElementById('noResults');
    if (noResults) noResults.remove();
}
</script>
{% endblock %}
